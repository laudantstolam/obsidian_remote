### 資源
>[!example]+ ROURCES
>- [VirusShare](https://virusshare.com/): An excellent resource for malware researchers, VirusShare houses a vast collection of malware samples. They currently have over 30 million samples in their repository, all of which are freely available to the public.
>- [Hybrid Analysis](https://www.hybrid-analysis.com/): This website allows us to submit files for malware analysis. However, they also have a public feed of their analyses, where malware samples are often shared.
>- [TheZoo](https://github.com/ytisf/theZoo): A GitHub repository that contains a collection of live malware for analysis and education. The repository also contains additional information about each sample, such as its family and the type of activities it performs.
>- [Malware-Traffic-Analysis.net](https://malware-traffic-analysis.net/): This website provides traffic analysis exercises that can be extremely beneficial for people trying to learn about malware traffic patterns. They often provide pcap files of actual malware traffic, which can be quite informative.
>- [VirusTotal](https://www.virustotal.com/): VirusTotal inspects items with over 70 antivirus scanners and URL/domain blocklisting services, in addition to a myriad of tools to extract signals from the studied content. Any user can select a file from their computer using their browser and send it to VirusTotal. VirusTotal offers a number of file submission methods, including the primary public web interface, desktop uploaders, browser extensions and a programmatic API.
>- [ANY.RUN](https://app.any.run/): An interactive online sandbox for malware analysis. The service allows researchers to analyze malware behavior by running samples in a controlled environment. While it offers both free and paid tiers, even the free version provides access to public submissions, which can include various malware samples.
>- [Contagio Malware Dump](https://contagiodump.blogspot.com/): Contagio Dump is a collection of malware samples, threat reports, and related resources curated by a malware researcher named Mila. The site provides direct, anonymized access to an extensive range of malware samples, including various types of trojans, worms, ransomware, and exploits. It's frequently used by security researchers and analysts to study malware behavior and develop mitigation techniques.
>- [VX Underground](https://www.vx-underground.org/): VX-Underground is one of the largest collections of malware source code, articles, and papers on the internet. It aims to collect, preserve, and share all kinds of materials related to malware, exploit, and hacking culture. This resource is valuable to security researchers and enthusiasts who want to study malware construction and behavior from a more technical and code-centric perspective.


### 類型

- `Viruses`：這些臭名昭著的惡意軟體形式旨在滲透和繁殖主機檔，從一個系統過渡到另一個系統。它們鎖定可靠的程式，在觸發受感染的檔時立即採取行動。它們的破壞力範圍從破壞或更改數據到破壞系統功能，甚至通過網路傳播，造成廣泛的破壞。
    
- `Worms`：蠕蟲是一種自主惡意軟體，能夠在不需要人工干預的情況下跨網路繁殖。他們利用網路弱點在未經許可的情況下滲透系統。一旦進入，它們要麼提供破壞性的有效載荷，要麼繼續繁殖到其他易受攻擊的設備。蠕蟲可以發起迅速且不斷升級的感染，導致巨大的破壞，甚至潛在的拒絕服務攻擊。
    
- `Trojans`：也稱為特洛伊木馬，這些偽裝成正版軟體以誘騙使用者運行它們。進入系統後，他們製作後門，允許攻擊者遠程獲得未經授權的控制權。特洛伊木馬可以被武器化以竊取敏感數據，例如密碼或財務資訊，並在受感染的系統上編排其他有害活動。
    
- `Ransomware`：這種惡意類型的惡意軟體會加密目標系統上的檔，使其無法訪問。然後，攻擊者要求贖金以換取解密密鑰，從而有效地將受害者的數據用於贖金。勒索軟體攻擊的影響可能會削弱組織和個人的實力，從而導致嚴重的財務和聲譽損害。
    
- `Spyware`：這種類型的惡意軟體在未經使用者同意的情況下秘密收集敏感數據和用戶活動。它可以跟蹤在線瀏覽習慣、記錄擊鍵和捕獲登錄憑據，對隱私和安全構成嚴重風險。竊取的數據通常被發送到遠端伺服器用於有害目的。
    
- `Adware`：雖然沒有那麼具有破壞性，但廣告軟體仍然可能是一種煩惱和安全威脅。它會在受感染的系統上顯示不請自來的侵入性廣告，通常會導致用戶體驗不佳。廣告軟體還可能跟蹤用戶行為並收集數據以進行定向廣告。
    
- `Botnets`：這些是受感染設備網路，通常稱為機器人或殭屍，由中央命令和控制 （C2） 伺服器控制。殭屍網路可以被用於各種有害活動，包括發起 DDoS 攻擊、傳播垃圾郵件或傳播其他惡意軟體。
    
- `Rootkits`：這些是隱蔽形式的惡意軟體，旨在獲得對操作系統基本元件（“根”）的未經授權的訪問和控制。它們會改變系統功能以隱藏它們的存在，使它們極具難度被發現和消除。攻擊者可以利用 rootkit 來維持長時間的訪問並躲避安全協定。
    
- `Backdoors/RATs (Remote Access Trojans)`：後門和 RAT 經過精心設計，可從遠端位置提供對受感染系統的未經授權的訪問和控制。攻擊者可以利用它們來保持長時間的控制、提取數據或煽動其他攻擊。
    
- `Droppers`：這是一種惡意軟體，用於在受感染的系統上傳輸和安裝額外的惡意負載。它們充當其他惡意軟體的管道，確保隱蔽安裝和執行更複雜的威脅。
    
- `Information Stealers`：這些是針對和提取敏感數據（如登錄憑據、個人資訊或智慧財產權）而量身定製的，用於有害目的。這包括身份盜竊或在暗網上出售數據。

### 內部架構
![image.png](https://academy.hackthebox.com/storage/modules/227/windows_architecture.png)

- `User Mode`：對系統資源的訪問有限，並且必須通過應用程式程式設計介面 <font color="#f79646">（API）</font> 與作業系統進行交互。這些進程彼此隔離，無法直接訪問硬體或關鍵系統功能。但是，在此模式下，惡意軟體仍然可以操縱檔、註冊表設置、網路連接和其他用戶可訪問的資源，並且可能會<font color="#f79646">嘗試提升許可權</font>以獲得對系統的更多控制權。

>[!examples]+ User Mode components
>`User-mode components`是操作系統中無法直接訪問硬體或內核數據結構的部分。它們通過 API 和系統調用與系統資源進行交互。讓我們討論其中的一些：
>
>1. `System Support Processes`：<font color="#f79646">關鍵功能</font>和服務（如登錄進程/工作階段管理員 /服務控制管理員。這些不是 Windows 服務，但它們是系統正常運行所必需的。
>
>2. `Service Processes`：這些進程承載 Windows 服務。它們通常在<font color="#f79646">後台運行</font>，根據其配置和參數執行任務。
>
>1. `User Applications`：這些是由使用者程式創建的進程，包括32位和64位應用程式。它們通過 Windows 提供的 [API](https://en.wikipedia.org/wiki/Windows_API) 與作業系統交互。這些 API 呼叫被重定向到[NTDLL.DLL](https://en.wikipedia.org/wiki/Microsoft_Windows_library_files#NTDLL.DLL)，觸發從使用者模式到內核模式的轉換，在內核模式下執行系統調用。然後，將結果返回到使用者模式應用程式，並轉換回使用者模式。
>
>3. `Environment Subsystems`：這些元件負責為特定類型的應用程式或進程提供執行環境。它們包括 [Win32 子系統](https://en.wikipedia.org/wiki/Architecture_of_Windows_NT#Win32_environment_subsystem)、[POSIX](https://en.wikipedia.org/wiki/Microsoft_POSIX_subsystem) 和 [OS/2](https://en.wikipedia.org/wiki/OS/2)。
  >  
>1. `Subsystem DLLs`：這些動態連結庫將記錄的函數轉換為適當的內部本機系統調用


- `Kernel Mode`：相比之下，內核模式是運行 Windows 內核的<font color="#f79646">高特權模式</font>。內核可以不受限制地訪問系統資源、硬體和關鍵功能。它提供核心操作系統服務，管理系統資源，並加強安全性和穩定性。設備驅動程式也以內核模式運行，這些驅動程式有助於與硬體設備進行通信。如果惡意軟體在內核模式下運行，它將獲得更高的控制權，並可以操縱系統行為、隱藏其存在、攔截系統調用和篡改安全機制。
>[!examples] Kernal Mode components
>1. `Executive`：內核模式下的上層可通過 中的函數訪問。它由 `I/O Manager`, `Object Manager`, `Security Reference Monitor`, `Process Manager`等元件組成，用於管理作業系統的核心方面，例如 I/O 操作、物件管理、安全性和進程。它首先運行一些檢查，然後將調用傳遞給內核，或調用相應的設備驅動程式來執行請求的操作。
>
>1. `Kernel`：此元件管理系統資源，提供 、 和 等低級服務。`thread scheduling``interrupt and exception dispatching``multiprocessor synchronization`
>  
>1. `Device Drivers`：這些軟體元件使操作系統能夠與硬體設備進行交互。它們充當仲介，使系統能夠管理和控制硬體和軟體資源。
>
>1. `Hardware Abstraction Layer (HAL)`：此元件在硬體設備和操作系統之間提供抽象層。它允許軟體開發人員以一致且獨立於平臺的方式與硬體進行交互。
>
>1. `Windowing and Graphics System (Win32k.sys)`：此子系統負責管理圖形使用者介面 （GUI） 和在螢幕上呈現視覺元素。
